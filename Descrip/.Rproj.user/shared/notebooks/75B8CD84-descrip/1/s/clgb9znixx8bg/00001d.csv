"0",""
"0","# ─── Leer shapefile y filtrar Huila ──────────────────────────"
"0","shp_path <- file.path(""Datos"", ""MGN_2021_COLOMBIA"", ""ADMINISTRATIVO"", ""MGN_MPIO_POLITICO.shp"")"
"0","colombia <- st_read(shp_path, quiet = TRUE)"
"0",""
"0",""
"0","huila <- colombia %>%"
"0","  filter(DPTO_CNMBR == ""HUILA"") %>%"
"0","  mutate("
"0","    MPIO_CCDGO = str_pad(as.character(MPIO_CCDGO), 3, pad = ""0""),"
"0","    cod_municipio = paste0(""41"", MPIO_CCDGO)"
"0","  )"
"0",""
"0","# ─── Reproyectar todo al CRS EPSG:3116 ───────────────────────"
"0","huila_proj <- st_transform(huila, crs = 3116)"
"0",""
"0","# ─── Calcular centroides de todos y de Neiva ─────────────────"
"0","huila_proj <- huila_proj %>%"
"0","  mutate(centroide = st_centroid(geometry))"
"0",""
"0","neiva_centroid <- huila_proj %>%"
"0","  filter(MPIO_CNMBR == ""NEIVA"") %>%"
"0","  pull(centroide)"
"0",""
"0","# ─── Calcular distancias desde cada municipio a Neiva ────────"
"0","huila_dist <- huila_proj %>%"
"0","  mutate("
"0","    distancia_km = as.numeric(st_distance(centroide, neiva_centroid)) / 1000"
"0","  )"
"0",""
"0","# ─── Revisar distancias (opcional) ───────────────────────────"
"0","#print(huila_dist %>% select(MPIO_CNMBR, distancia_km))"
"0",""
"0","# ─── Mapa interactivo de distancias ───────────────────────────"
"0","tmap_mode(""view"")"
"0",""
"0","tm_shape(huila_dist) +"
"0","  tm_polygons("
"0","    col = ""distancia_km"","
"0","    palette = ""Blues"","
"0","    id = ""MPIO_CNMBR"","
"0","    popup.vars = c(""Distancia a Neiva (km)"" = ""distancia_km"")"
"0","  ) +"
"0","  tm_view(set.view = c(-75.6, 2.6, 8))"
"0",""
